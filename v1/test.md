דוקומנטציה לאינטגרציות - Front End
 
הגדרות ראשוניות:
הגדרות מתקדמות לחנות -> לסמן V ב "API" ו "אינטגרציות" -> שמור.
נוצרת קובייה מצד ימין של API, לוחצים על "משתמשי API",  יוצרים משתמש חדש , ממלאים את השם בהתאם לאינטגרציה הרלוונטית , מסמנים משתמש פעיל, להעלות את מספר ההגבלות רשומות כדי שתוכלו לעשות בדיקות וזה לא יחסם , ולמטה להוסיף ולהוריד הרשאות בהתאם לאינטגרציה הרלוונטית.
למטה מצד ימין לוחצים על אינטגרציות ויוצרים אינטגרציה חדשה, מצב -פעיל, Debug - פעיל.
** באינטגרציה מתקשרים בין המערכות, מקבלים מידע, שולחים מידע, בהתאם לאינטגרציה שאנחנו צריכים. ** 
ב - config , מגדירים את שדותה האינטגרציה שאנחנו צריכים. פורמט: מערך שעוטף Json. כל JSON מייצג שדה אחד
בד"כ נצטרך שדה שישמור את הAPI  USER TOKEN, לדוגמא: 
הסבר: 
type - password , כשאני משקף את המידע אז יראו כוכביות ורק את ה-4 ספרות אחרונות (כמו מספר כרטיס אשראי).
שדה label -  זה הכותרת של השדה שנוצר ב - trigger.
שדה key - שם השדה. דרך השם הזה ניגש אל תוכן השדה ברמת הקוד. ( השם צריך להיות מחובר עם מקף תחתון במידה ויש יותר ממילה אחת, כמו כל משתנה בשכל שפת תכנות).
שדה class, לא רלוונטי, לכתוב אותו ככה.
ב - script הראשון, בחלק זה נכתוב קטע קוד ראשוני שיתחיל כל ריצה של האינטגרציה (לדוגמא: אם מטרת האינטגרציה היא לשדר הזמנה מסויימת למערכת חיצונית כלשהי, אז בחלק זה נבצע בקשת HTTP לAPI של קונימבו כדי לקבל את המידע הנדרש על אותה הזמנה).
בחלק זה חובה שיופיעו הגדרות של  5 הפונקציות הבאות. כל פונקציה צריכה בסוף להחזיר אובייקט JSON בהתאם ללוגיקה של אותה פונקציה.
ניתן לקחת אינטגרציה אחרת כדוגמא להגדרת הפונקציות כדי לא ליפול על  טעויות הקלדה. (חנות macbubi).
function data(request, vars) בפונקציה הזאת אנחנו מגדירים את משתנה הdata שבו ניתן להחזיק מידע שנרצה להשתמש בו בהמשך הscript. פונקציה זו צריכה להחזיר אובייקט JSON
 לדוגמא: אם הופעל WEBHOOK עד יצירת הזמנה חדשה, מספר ההזמנה מגיע לאינטגרציה דרך request וניתן לשמור אותו ולאחר מכן להשתמש בID הזה כדי לשלוף את המידע של ההזמנה עבור המשך האינטגרציה. דוגמת קוד:
["order_id": request["params"]["order"]["id"
בKEY בשם order_id נמצא הערך ואני אוכל להשתמש בו בהמשך ה script לצרכים שלי.

function request(data, vars): מטרת הפונקציה הזו - ביצוע בקשת HTTP. פונקציה זו צריכה להחזיר אובייקט JSON שמייצג נתונים שישמשו לצורך בקשת HTTP
לדוגמא: בתמונה המצורפת, אנחנו שולחים בקשת GET ל API של קונימבו עם ה- Token שקיבלנו כשיצרנו את המשתמש API.

ב :URL בשדה זה נכניס את כתובת הURL שאליה נרצה לבצע את בקשת הHTTP. במקרה שלנו (ראה תמונה מטה) אנחנו פונים לendpoint של הזמנות, ובתוך זה אנחנו מקבלים מספר הזמנה
בתמונה מטה יש דוגמא לשימוש באובייקט הdata. 
Data[0][“order_id”] - מיקום 0 מייצג את מיקום הSCRIPT שבו אנחנו   נמצאים. אם נרצה לגשת למידע בDATA שנשמר בSCRIPT הראשון, ניגש ל DATA]0[, אם נרצה לגשת למידע בDATA שנשמר בSCRIPT השני, ניגש ל DATA]1[ וכן הלאה.
בMETHOD: צריך להכיל מחרוזת שמייצגת את סוג הבקשה שנרצה
 לבצע (GET\POST\PUT)
בBODY: צריך להכיל אובייקט JSON עם נתונים שנרצה לשלוח בBODY
של הבקשה
בHEADERS: צריך להכיל אובייקט JSON עם נתונים שנרצה לשלו
בHEADER של הבקשה.
 


 
function filter(response, vars), מטרת הפונקציה הזו היא: בהתבסס על הresponse שקיבלנו מבקשת הHTTP שקיבלנו בסעיף הקודם - האם נרצה להמשיך באינטגרציה או לא. פונקציה זו חייבת להחזיר TRUE או FALSE. לדוגמא: אם מטרת האינטגרציה שלנו היא לשלוח הזמנה של קונימבו למערכת חיצונית, אנחנו נרצה שהאינטגרציה תפסיק לרוץ במידה וההזמנה שביקשנו לקרוא לא קיימת במערכת. 
	להוסיף תמונה
 
function array(response, vars), מטרת הפונקציה הזו היא לגשת לresponse שקיבלנו מקריאת הHTTP, ולהחזיר מתוכה את האובייקט שעליו נרצה לעבוד בהמשך האינטגרציה (האובייקט שעליו ירוצו הACTIONS הבאים)
כרגע אין הסבר.
החלק השני של כל אינטגרציה יורכב מACTIONS,
לכל ACTION יש SCRIPT בדומה לSCRIPT הראשון שראינו. מטרת הSCRIPTIM הבאים היא לעשות מניפולציות על המידע שקיבלנו מהSCRIPT הראשון ולכתוב אותו למערכות חיצוניות (לדוגמא: אחרי שקיבלנו את המידע מה API של קונימבו (בסקריפט הראשון), בחלק הזה נבצע קריאת HTTP לכתיבת המידע למערכת החיצונית(או לעדכן את המידע אצלנו במערכת)).
בSCRIPT של כל ACTION חובה שיופיעו שלושת הפונקציות הבאות (ניתן להעתיק חלק זה מאינטגרציה קיימת כדי להימנע מטועיות הקלדה. (חנות macbubi).
function data(response, vars, current_obj), בדומה לפונקציה data של הscript הראשון, מטרת הפונקציה הזו היא להגדיר ולהחזיר אובייקט JSON שיכיל מידע שנרצה להשתמש בו בפונקציות הבאות.
הפונקציה הזו מקבלת כפרמטר את current_obj. משתנה זה מכיל את האובייקט שנרצה "לעבוד" עליו במהלך האינטגרציה (בין אם זה אובייקט מתוך מערך של אובייקטים או אובייקט בודד)
לדוגמא: אם האינטגרציה שלנו קוראת הזמנה מקונימבו וכותבת אותה למערכת חיצונית, אז אנחנו צריכים לדאוג שcurrent_obj יכיל את המידע על ההזמנה המבוקשת.
בנוסף אם נרצה לעשות מניפולציות על המידע,נוכל לבצע אותה כאן בקוד JAVASCRIPT רגיל (נרצה לעשות זאת אם המערכת החיצונית שאליה אנחנו כותבים את ההזמנה מבקשת את המידע בפורמט מסויים, לדוגמא.)
בדוגמא בתמונה אנחנו רואים שאפשר לשמור במשתנים את הערכים שהגדרנו בקונפיג, ואיך אנחנו משתמשים בערכים שנמצאים ב - current_obj.
(כמובן שאפשר לעשות כל מיני פעולות JS פה כמו לרוץ בלולאה, להמיר את התוכן מ string ל number וכו, כדי לסדר את ה JSON בהתאם). 
function filter(data, vars), מטרת פונקציה זו היא "לשאול" האם אנחנו רוצים לעצור את האינטגרציה או להמשיך. לדוגמא: אם נרצה לשדר הזמנות שיש להם סוג משלוח מיוחד, אז בSCRIPT הראשון נשלוף את ההזמנה (או מכלול של הזמנות), ובSCRIPT השני במתודה FILTER שלו נבדוק האם הסוג משלוח של ההזמנה מתאים למה שנדרש, לדוגמא GETTAXI. פונקציה זו חייבת להחזיר true או false.
(אם מחזירה TRUE האינטגרציה תמשיך אם FALSE תעצור)
function request(data, vars), במידה ועברנו את הפונקציה הקודמת, 
בפונקציה הזו נכתוב את פרטי הREQUEST שאנחנו רוצים לבצע (לרוב לגורם צד שלישי). כדי להרכיב את הבקשה נוכל להשתמש באובייקט DATA שיצרנו בפונקציה הראשונה ובנתונים ששמרנו בתוכו.

מהדוגמא: אנחנו שולחים בקשת POST ל API מסויים. בדוגמא זו ניתן לראות שימוש ב - internal_data, שמשמש לצרכים פנימיים שלנו. במקרה הזה אנחנו שולחים דרכו את ה - authentication שצריך לבצע עבור הבקשה הספציפית, אם סוג הauthenctication הנדרש והפרמטרים שהוא דורש. כרגע נתמכת רק AUTHENTICATION מסוג BASIC.
ב - body , בדומה לSCRIPT הראשון, בחלק הזה נעביר את תוכן הBODY שנרצה להעביר בבקשת הHTTP.
* פה אנחנו שמים data[1], כי זה script מספר 1.

אם נצטרך עוד פעולות, נוסיף למטה בהתאם.
 
Trigger - מטרת הטריגר היא: הפעלת אינטגרציות.
הסבר: הפעלת האינטגרציה מתבצעת ע"י ביצוע קריאת HTTP מסוג GET לכתובת הטריגר.
יצירת טריגר:
לוחצים מצד ימין בתפריט  על "טריגר", יוצרים טריגר חדש ובוחרים את סוג האינטגרציה שיצרנו.
מסמנים את הטריגר כפעיל
מורידים את השכבת אבטחה נוספת בברירת מחדל (אלא אם צריך).
בהגבלת פעילות מעלים את המקסימום, כדי שלא נחסם בבדיקות כשאנחנו יוצרים את הבדיקה
ופה ממלאים את השדות שיצרנו ב - config במסך של אינטגרציות.
בדיקות ב - Postman
Postman - זהו כלי לביצוע בדיקת הקריאות מכל סוג (GET,POST וכו ), שנוודא אם זה נופל, אז איפה נופל.
כאשר עושים בקשות POST/GET, בד"כ צריך להוסיף אוטנטיקציה כדי שהמקום שאנחנו רוצים לשאוב ממנו מידע או להעביר אליו מידע, ידע ממי זה בא ולאיפה, ולתת לי אישור לעשות את הפעולה הזאת.


בקשת POST - 
בוחרים בבקשות ב- POST, שמים את ה URL של API שאליו אנחנו רוצים לשדר, עם הפרמטרים המוסכמים איתם.
ב-headers, ושאר הטאבים שמים את התוכן בהתאם אם צריך, כמו המוסכמה של ה API של מי שאנחנו רוצים לשדר לו ב POST.
בקשת GET - 
בדוגמא: עשינו בקשת GET לכתובת מסוימת (שרצינו לקבל רשימה של כל הלקוחות).
יש גם אופציה להוסיף אוטנטיקציה אם צריך לפי סוג מסויים (basic auth), אם זה צלח, נקבל רשימה של הלקוחות, אם לא, שגיאה שתסביר מה הבעיה.
הפעלת TRIGGER - 

כאשר רוצים להפעיל טריגר של אינטגרציה מסויימת, צריך לשים את הכתובת שקיבלנו בממשק, בבקשת GET , ואם זה הצליח, אז האינטגרציה שלנו תופעל.



